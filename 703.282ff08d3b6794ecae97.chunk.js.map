{"version":3,"sources":["webpack://react-template/./app/components/RepoCard/index.js","webpack://react-template/./app/containers/HomeContainer/selectors.js","webpack://react-template/./app/utils/apiUtils.js","webpack://react-template/./app/services/repoApi.js","webpack://react-template/./app/containers/HomeContainer/saga.js","webpack://react-template/./app/containers/HomeContainer/index.js"],"names":["CustomCard","styled","name","fullName","stargazersCount","data-testid","If","condition","otherwise","T","id","values","stars","selectHomeContainerDomain","state","homeContainer","initialState","apiClients","github","default","createApiClientWithTransForm","baseURL","api","create","headers","addResponseTransform","response","ok","data","mapKeysDeep","keys","camelCase","addRequestTransform","request","snakeCase","repoApi","type","process","generateApiClient","getRepos","repoName","get","getGithubRepos","homeContainerSaga","REQUEST_GET_GITHUB_REPOS","homeContainerTypes","successGetGithubRepos","homeContainerCreators","failureGetGithubRepos","action","call","put","takeLatest","Search","props","maxwidth","color","Container","padding","RightContent","StyledT","colors","HomeContainer","dispatchGithubRepos","dispatchClearGithubRepos","intl","reposData","reposError","useState","loading","setLoading","history","useHistory","useEffect","items","length","repoError","totalCount","debouncedHandleOnChange","debounce","rName","isEmpty","onClick","push","window","location","reload","title","formatMessage","marginBottom","defaultValue","onChange","evt","target","value","onSearch","searchText","active","For","of","ParentComponent","renderItem","item","index","key","text","defaultProps","mapStateToProps","createStructuredSelector","createSelector","substate","mapDispatchToProps","dispatch","requestGetGithubRepos","clearGithubRepos","withConnect","connect","compose","injectIntl","memo","injectSaga","saga","HomeContainerTest"],"mappings":"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","file":"703.282ff08d3b6794ecae97.chunk.js","sourcesContent":["/**\n *\n * RepoCard\n *\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport { Card } from 'antd';\nimport T from '@components/T';\nimport If from '@components/If';\nimport { isEmpty } from 'lodash';\n\nconst CustomCard = styled(Card)`\n  && {\n    margin: 20px 0;\n  }\n`;\n\nexport function RepoCard({ name, fullName, stargazersCount }) {\n  return (\n    <CustomCard data-testid=\"repo-card\">\n      <If condition={!isEmpty(name)} otherwise={<T data-testid=\"name-unavailable\" id=\"repo_name_unavailable\" />}>\n        <T data-testid=\"name\" id=\"repository_name\" values={{ name: name }} />\n      </If>\n      <If\n        condition={!isEmpty(fullName)}\n        otherwise={<T data-testid=\"fullName-unavailable\" id=\"repo_full_name_unavailable\" />}\n      >\n        <T data-testid=\"fullName\" id=\"repository_full_name\" values={{ fullName: fullName }} />\n      </If>\n      <If condition={stargazersCount} otherwise={<T data-testid=\"stargazers-unavaiable\" id=\"repo_stars_unavailable\" />}>\n        <T data-testid=\"stargazers\" id=\"repository_stars\" values={{ stars: stargazersCount }} />\n      </If>\n    </CustomCard>\n  );\n}\n\nRepoCard.propTypes = {\n  name: PropTypes.string,\n  fullName: PropTypes.string,\n  stargazersCount: PropTypes.number\n};\n\nexport default RepoCard;\n","import { createSelector } from 'reselect';\nimport get from 'lodash/get';\nimport { initialState } from './reducer';\n\n/**\n * Direct selector to the homeContainer state domain\n */\n\nexport const selectHomeContainerDomain = (state) => state.homeContainer || initialState;\n\n/**\n * Other specific selectors\n */\n\n/**\n * Default selector used by HomeContainer\n */\n\nexport const selectReposData = () =>\n  createSelector(selectHomeContainerDomain, (substate) => get(substate, 'reposData'));\n\nexport const selectReposError = () =>\n  createSelector(selectHomeContainerDomain, (substate) => get(substate, 'reposError'));\n\nexport const selectRepoName = () => createSelector(selectHomeContainerDomain, (substate) => get(substate, 'repoName'));\n","import { create } from 'apisauce';\nimport snakeCase from 'lodash/snakeCase';\nimport camelCase from 'lodash/camelCase';\nimport { mapKeysDeep } from './index';\n\nconst apiClients = {\n  github: null,\n  default: null\n};\nexport const getApiClient = (type = 'github') => apiClients[type];\nexport const generateApiClient = (type = 'github') => {\n  switch (type) {\n    case 'github':\n      apiClients[type] = createApiClientWithTransForm(process.env.GITHUB_URL);\n      return apiClients[type];\n    default:\n      apiClients.default = createApiClientWithTransForm(process.env.GITHUB_URL);\n      return apiClients.default;\n  }\n};\n\nexport const createApiClientWithTransForm = (baseURL) => {\n  const api = create({\n    baseURL,\n    headers: { 'Content-Type': 'application/json' }\n  });\n  api.addResponseTransform((response) => {\n    const { ok, data } = response;\n    if (ok && data) {\n      response.data = mapKeysDeep(data, (keys) => camelCase(keys));\n    }\n    return response;\n  });\n\n  api.addRequestTransform((request) => {\n    const { data } = request;\n    if (data) {\n      request.data = mapKeysDeep(data, (keys) => snakeCase(keys));\n    }\n    return request;\n  });\n  return api;\n};\n","import { generateApiClient } from '@utils/apiUtils';\nconst repoApi = generateApiClient('github');\n\nexport const getRepos = (repoName) => repoApi.get(`/search/repositories?q=${repoName}`);\n","import { put, call, takeLatest } from 'redux-saga/effects';\nimport { getRepos } from '@services/repoApi';\nimport { homeContainerTypes, homeContainerCreators } from './reducer';\n\nconst { REQUEST_GET_GITHUB_REPOS } = homeContainerTypes;\nconst { successGetGithubRepos, failureGetGithubRepos } = homeContainerCreators;\nexport function* getGithubRepos(action) {\n  const response = yield call(getRepos, action.repoName);\n  const { data, ok } = response;\n  if (ok) {\n    yield put(successGetGithubRepos(data));\n  } else {\n    yield put(failureGetGithubRepos(data));\n  }\n}\n// Individual exports for testing\nexport default function* homeContainerSaga() {\n  yield takeLatest(REQUEST_GET_GITHUB_REPOS, getGithubRepos);\n}\n","import React, { useEffect, memo, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport { compose } from 'redux';\nimport get from 'lodash/get';\nimport debounce from 'lodash/debounce';\nimport isEmpty from 'lodash/isEmpty';\nimport styled from 'styled-components';\nimport { injectIntl } from 'react-intl';\nimport { injectSaga } from 'redux-injectors';\nimport { Card, Skeleton, Input } from 'antd';\nimport T from '@components/T';\nimport If from '@components/If';\nimport For from '@app/components/For';\nimport colors from '@app/themes/colors';\nimport RepoCard from '@app/components/RepoCard';\nimport { selectReposData, selectReposError, selectRepoName } from './selectors';\nimport { homeContainerCreators } from './reducer';\nimport homeContainerSaga from './saga';\nimport { useHistory } from 'react-router-dom';\n\nconst { Search } = Input;\n\nconst CustomCard = styled(Card)`\n  && {\n    margin: 20px 0;\n    max-width: ${(props) => props.maxwidth};\n    color: ${(props) => props.color};\n    ${(props) => props.color && `color: ${props.color}`};\n  }\n`;\nconst Container = styled.div`\n  && {\n    display: flex;\n    flex-direction: column;\n    max-width: ${(props) => props.maxwidth}px;\n    width: 100%;\n    margin: 0 auto;\n    padding: ${(props) => props.padding}px;\n  }\n`;\nconst RightContent = styled.div`\n  display: flex;\n  align-self: flex-end;\n`;\n\nconst StyledT = styled(T)`\n  && {\n    color: ${colors.gotoStories};\n  }\n`;\nexport function HomeContainer({\n  dispatchGithubRepos,\n  dispatchClearGithubRepos,\n  intl,\n  reposData,\n  reposError,\n  repoName,\n  maxwidth,\n  padding\n}) {\n  const [loading, setLoading] = useState(false);\n  const history = useHistory();\n\n  useEffect(() => {\n    const loaded = get(reposData, 'items', null) || reposError;\n    if (loaded) {\n      setLoading(false);\n    }\n  }, [reposData]);\n\n  useEffect(() => {\n    if (repoName && !reposData?.items?.length) {\n      dispatchGithubRepos(repoName);\n      setLoading(true);\n    }\n  }, []);\n\n  const handleOnChange = (rName) => {\n    if (!isEmpty(rName)) {\n      dispatchGithubRepos(rName);\n      setLoading(true);\n    } else {\n      dispatchClearGithubRepos();\n    }\n  };\n  const debouncedHandleOnChange = debounce(handleOnChange, 200);\n\n  const renderRepoList = () => {\n    const items = get(reposData, 'items', []);\n    const totalCount = get(reposData, 'totalCount', 0);\n    return (\n      <If condition={!isEmpty(items) || loading}>\n        <CustomCard>\n          <Skeleton loading={loading} active>\n            <If condition={!isEmpty(repoName)}>\n              <div>\n                <T id=\"search_query\" values={{ repoName }} />\n              </div>\n            </If>\n            <If condition={totalCount !== 0}>\n              <div>\n                <T id=\"matching_repos\" values={{ totalCount }} />\n              </div>\n            </If>\n            <For\n              of={items}\n              ParentComponent={Container}\n              renderItem={(item, index) => <RepoCard key={index} {...item} />}\n            />\n          </Skeleton>\n        </CustomCard>\n      </If>\n    );\n  };\n  const renderErrorState = () => {\n    let repoError;\n    if (reposError) {\n      repoError = reposError;\n    } else if (isEmpty(repoName)) {\n      repoError = 'repo_search_default';\n    }\n    return (\n      !loading &&\n      repoError && (\n        <CustomCard color={reposError ? 'red' : 'grey'} title={intl.formatMessage({ id: 'repo_list' })}>\n          <If condition={reposError} otherwise={<T data-testid=\"default-message\" id={repoError} />}>\n            <T data-testid=\"error-message\" text={reposError} />\n          </If>\n        </CustomCard>\n      )\n    );\n  };\n\n  const handleStoriesClick = () => {\n    history.push('/stories');\n    window.location.reload();\n  };\n\n  return (\n    <Container maxwidth={maxwidth} padding={padding}>\n      <RightContent>\n        <StyledT onClick={handleStoriesClick} data-testid=\"redirect\" id=\"stories\" />\n      </RightContent>\n      <CustomCard title={intl.formatMessage({ id: 'repo_search' })} maxwidth={maxwidth}>\n        <T marginBottom={10} id=\"get_repo_details\" />\n        <Search\n          data-testid=\"search-bar\"\n          defaultValue={repoName}\n          type=\"text\"\n          onChange={(evt) => debouncedHandleOnChange(evt.target.value)}\n          onSearch={(searchText) => debouncedHandleOnChange(searchText)}\n        />\n      </CustomCard>\n      {renderRepoList()}\n      {renderErrorState()}\n    </Container>\n  );\n}\n\nHomeContainer.propTypes = {\n  dispatchGithubRepos: PropTypes.func,\n  dispatchClearGithubRepos: PropTypes.func,\n  intl: PropTypes.object,\n  reposData: PropTypes.shape({\n    totalCount: PropTypes.number,\n    incompleteResults: PropTypes.bool,\n    items: PropTypes.array\n  }),\n  reposError: PropTypes.string,\n  repoName: PropTypes.string,\n  history: PropTypes.object,\n  maxwidth: PropTypes.number,\n  padding: PropTypes.number\n};\n\nHomeContainer.defaultProps = {\n  maxwidth: 500,\n  padding: 20,\n  reposData: {},\n  reposError: null\n};\n\nconst mapStateToProps = createStructuredSelector({\n  reposData: selectReposData(),\n  reposError: selectReposError(),\n  repoName: selectRepoName()\n});\n\nexport function mapDispatchToProps(dispatch) {\n  const { requestGetGithubRepos, clearGithubRepos } = homeContainerCreators;\n  return {\n    dispatchGithubRepos: (repoName) => dispatch(requestGetGithubRepos(repoName)),\n    dispatchClearGithubRepos: () => dispatch(clearGithubRepos())\n  };\n}\n\nconst withConnect = connect(mapStateToProps, mapDispatchToProps);\n\nexport default compose(\n  injectIntl,\n  withConnect,\n  memo,\n  injectSaga({ key: 'homeContainer', saga: homeContainerSaga })\n)(HomeContainer);\n\nexport const HomeContainerTest = compose(injectIntl)(HomeContainer);\n"],"sourceRoot":""}